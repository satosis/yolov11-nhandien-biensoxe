go2rtc:
  streams:
    imou_2k_overlay:
      - "ffmpeg:rtsp://admin:L2D47B99@10.115.215.241:554/cam/realmonitor?channel=1&subtype=0#video=h264#drawbox=x=0:y=400:w=iw:h=4:color=red@0.9:t=fill"

mqtt:
  host: mosquitto
  port: 1883
  topic_prefix: frigate

record:
  enabled: true
  retain:
    days: 0

cameras:
  imou_2k:
    ffmpeg:
      inputs:
        # Main stream for recording + detection (ưu tiên độ chính xác nhận diện người)
        - path: rtsp://admin:L2D47B99@10.115.215.241:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
            - detect
    detect:
      width: 1280
      height: 720
      fps: 8
    objects:
      track:
        - person
        - car
        - truck
      filters:
        person:
          # Giảm nhận diện sai (áo/quần áo/vật thể) nhưng vẫn giữ được người thật
          threshold: 0.66
          min_score: 0.50
          min_area: 1400
          min_ratio: 0.30
          max_ratio: 1.20
        car:
          threshold: 0.60
          min_score: 0.45
        truck:
          threshold: 0.60
          min_score: 0.45
    motion:
      # Tune these if lighting changes cause false positives
      threshold: 35
      contour_area: 100
      improve_contrast: true
    zones:
      gate:
        coordinates: []  # TODO: fill after calibrating layout

# Record only on motion/events (no 24/7 recording)
# Adjust zones to limit detection/recording to the gate area.
